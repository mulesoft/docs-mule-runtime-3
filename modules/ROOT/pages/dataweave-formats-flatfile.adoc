
= Flatfile Format
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:keywords: format, flatfile, */flatfile, application/flatfile

MIME type: `application/flatfile`

ID: `flatfile`

The Flat File format supports multiple types of fixed width records within a single message. The schema structure allows you to define how different record types are distinguished, and how the records are logically grouped.

NOTE: Flat File in DataWeave supports files of up to 15 MB, and the memory requirement is roughly 40 to 1. For example, a 1-MB file requires up to 40 MB of memory to process, so it's important to consider this memory requirement in conjunction with your TPS needs for large flat files. This is not an exact figure; the value might vary according to the complexity of the mapping instructions.

[[examples]]
== Example: Specify a Flat File Schema

This example shows a DataWeave script that outputs data in the Flat File format.
Notice that it uses the `schemaPath` and `structureIndent` writer properties.

[source,dataweave,linenums]
----
%dw 2.0
output application/flatfile schemaPath="src/main/resources/test-data/QBReqRsp.esl", structureIdent="QBResponse"
---
payload
----


[[properties]]
== Configuration Properties

DataWeave supports the following configuration properties for the Flatfile format.


[[reader_properties]]
=== Reader Properties

The Flatfile format accepts properties that provide instructions for reading input data.


[cols="1,1,1,3a", options="header"]
|===
|Parameter |Type |Default|Description
|`enforceRequires`  |`Boolean`|`false`|Error if required value missing Valid Options: `true` or `false`
|`missingValues`  |`String`|`null`|Fill character used to represent missing values Valid Options: `none` or `spaces` or `zeroes` or `nulls`
|`recordParsing`  |`String`|`null`|Record separator line break handling Valid Options: `strict` or `lenient` or `noTerminator` or `singleRecord`
|`schemaPath`  (Required) |`String`|`null`|Schema definition
|`segmentIdent`  |`String`|`null`|Segment identifier in schema
|`structureIdent`  |`String`|`null`|Structure identifier in schema
|`truncateDependingOn`  |`Boolean`|`false`|Truncate DEPENDING ON COBOL copybook values to length used Valid Options: `true` or `false`
|`zonedDecimalStrict`  |`Boolean`|`false`|Use the 'strict' ASCII form of sign encoding for COBOL copybook zoned decimal values Valid Options: `true` or `false`
|===

[[writer_properties]]
=== Writer Properties

The Flatfile format accepts properties that provide instructions for writing output data.

[cols="1,1,1,3a", options="header"]
|===
|Parameter |Type |Default|Description
|`bufferSize`  |`Number`|`8192`|The size of the buffer writer
|`deferred`  |`Boolean`|`false`|Indicates if the output should be deferred. Valid Options: `true` or `false`
|`encoding`  |`String`|`null`|The charset name to be used by this writer to encode the strings.
|`enforceRequires`  |`Boolean`|`false`|Error if required value missing Valid Options: `true` or `false`
|`missingValues`  |`String`|`null`|Fill character used to represent missing values Valid Options: `none` or `spaces` or `zeroes` or `nulls`
|`recordTerminator`  |`String`|`null`|Record separator line break Valid Options: `lf` or `cr` or `crlf` or `none`
|`schemaPath`  (Required) |`String`|`null`|Schema definition
|`segmentIdent`  |`String`|`null`|Segment identifier in schema
|`structureIdent`  |`String`|`null`|Structure identifier in schema
|`trimValues`  |`Boolean`|`false`|Trim values longer than field width Valid Options: `true` or `false`
|`truncateDependingOn`  |`Boolean`|`false`|Truncate DEPENDING ON COBOL copybook values to length used Valid Options: `true` or `false`
|`zonedDecimalStrict`  |`Boolean`|`false`|Use the 'strict' ASCII form of sign encoding for COBOL copybook zoned decimal values Valid Options: `true` or `false`
|===


[[mime_types]]
== Supported MIME Types

The Flatfile format supports the following MIME types.

[cols="1", options="header"]
|===
| MIME Type
|`*/flatfile`
|===
